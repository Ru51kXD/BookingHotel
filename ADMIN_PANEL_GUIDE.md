# Руководство по админ панели StayEasy

## Доступ к админ панели

### Учетные данные администратора по умолчанию:
- **Email:** `admin@stayeasy.kz`
- **Пароль:** `admin123`

### Как войти в админ панель:
1. Откройте главную страницу сайта
2. Нажмите кнопку "Войти" в правом верхнем углу
3. Введите учетные данные администратора
4. После входа перейдите по адресу `/admin` или нажмите на ссылку "Админ панель" в меню

## Функции админ панели

### 1. Обзор (Dashboard)
- Статистика пользователей (всего, активных, заблокированных)
- Статистика заявок партнеров
- Последние активности

### 2. Пользователи
- Просмотр всех зарегистрированных пользователей
- Поиск пользователей по имени или email
- Блокировка/разблокировка пользователей
- Просмотр информации о пользователях
- Удаление пользователей (с подтверждением)

### 3. Заявки партнеров
- Просмотр заявок на партнерство
- Одобрение или отклонение заявок
- Фильтрация по статусу

### 4. Покупки сертификатов
- Просмотр всех покупок подарочных карт
- Информация о покупателях и получателях

### 5. Использования предложений
- Статистика использования промокодов и предложений

### 6. Отели
- Управление отелями
- Добавление новых отелей
- Редактирование существующих отелей
- Удаление отелей

## Тестирование функций

### Создание тестовых пользователей:
1. Зарегистрируйте несколько пользователей через форму регистрации
2. Они автоматически появятся в разделе "Пользователи" админ панели

### Создание администратора через регистрацию:
- Зарегистрируйтесь с email `admin@stayeasy.kz` - пользователь автоматически получит права администратора

### Блокировка пользователей:
1. Перейдите в раздел "Пользователи"
2. Найдите нужного пользователя
3. Нажмите на иконку блокировки (красный крестик для блокировки, зеленая галочка для разблокировки)

### Удаление пользователей:
1. Перейдите в раздел "Пользователи"
2. Найдите пользователя, которого нужно удалить
3. Нажмите на красную иконку корзины (Trash2) в столбце "Действия"
4. Подтвердите удаление в появившемся модальном окне
5. **Внимание:** Удаление нельзя отменить!

## Исправленные проблемы

### ✅ Зарегистрированные пользователи теперь отображаются в админ панели
- Все пользователи, зарегистрированные через форму регистрации, автоматически появляются в разделе "Пользователи"
- Данные сохраняются в localStorage и корректно загружаются в админ панели

### ✅ Исправлены ошибки React с дублирующимися ключами
- Добавлены уникальные ключи для всех элементов в циклах map()
- Убраны дублирующиеся компоненты

### ✅ Добавлена полноценная система управления пользователями
- Просмотр всех пользователей
- Поиск и фильтрация
- Блокировка/разблокировка
- Статистика пользователей
- **Удаление пользователей с подтверждением**

## Структура данных

### Пользователи сохраняются в localStorage под ключом `registered_users`:
```json
[
  {
    "id": "1234567890",
    "name": "Иван Иванов",
    "email": "ivan@example.com",
    "phone": "+7 999 123 45 67",
    "password": "hashedPassword",
    "role": "user",
    "status": "active",
    "created_at": "2024-01-01T00:00:00.000Z",
    "updated_at": "2024-01-01T00:00:00.000Z"
  }
]
```

## Безопасность

- Доступ к админ панели ограничен только пользователями с ролью `admin`
- Автоматическое перенаправление неавторизованных пользователей
- Проверка прав доступа на каждой странице админ панели
- **Защита от самоудаления:** Администратор не может удалить свой собственный аккаунт
- **Подтверждение удаления:** Дополнительное предупреждение при удалении администраторов
- **Модальные окна подтверждения:** Все критические действия требуют подтверждения 